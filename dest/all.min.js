/*! just_bs - v1.0.0 - 2016-05-02
* Copyright (c) 2016 ; */
var GlobalModules=function(){function a(a){f.push(a)}function b(a){g.push(a)}function c(a){h.push(a)}function d(a){i.push(a)}function e(a){var b=[];return f.forEach(function(a){b.push("just.services."+a)}),g.forEach(function(a){b.push("just.controllers."+a)}),h.forEach(function(a){b.push("just.directives."+a)}),i.forEach(function(a){b.push("just.actions."+a)}),b.concat(a)}var f=[],g=[],h=[],i=[];return{add_service:a,add_controller:b,add_directive:c,add_action:d,get:e}}(),justConst=void 0;angular.module("just.constants",[]).constant("JustConst",justConst),GlobalModules.add_controller("header"),angular.module("just.controllers.header",[]).controller("HeaderController",["$rootScope","$scope","UserService",function(a,b,c){b.sign_out=function(){a.confirm_modal("确认退出吗?",b,function(){c.sign_out(a.current_user,function(){a.go("/login"),a.current_user=null})})},b.header_search={input_show:!1,search_info:"",open:function(){0==this.input_show&&""==this.search_info?this.input_show=!0:this.can_submit()?this.submit():this.close()},close:function(){this.input_show=!1,this.search_info=""},can_submit:function(){return this.search_info?!0:void 0},submit:function(){console.log("submit"),this.close()}},b.go_me=function(){a.go("/users/"+a.current_user.id+"/me")},b.go_manager_lessons=function(){a.go("/users/"+a.current_user.id+"/manage_lesson")}}]),GlobalModules.add_controller("lesson"),angular.module("just.controllers.lesson",[]).controller("LessonController",["$rootScope","$scope","$routeParams","LessonService","CommentsService",function(a,b,c,d,e){b.active_type="show_outline",b.change_active=function(a){b.active_type=a},c.lesson_id&&(d.get_lesson(c.lesson_id,function(b){console.log(b),a.current_lesson=b}),e.get_comments(c.lesson_id,function(a){console.log(a),b.comments=a})),b.submit_comment=function(){e.add_comments({course_id:a.current_lesson.id,content:b.my_comment},function(c){console.log(c),a.alert_modal("提示","评论成功"),e.get_comments(a.current_lesson.id,function(a){b.comments=a})})},b.video_url="http://7xt49i.com2.z0.glb.clouddn.com/%E5%8D%8A%E7%B3%96%E4%B8%BB%E4%B9%89.mp4",b.pdf_url="http://7xt49i.com2.z0.glb.clouddn.com/AngularJS%E6%9D%83%E5%A8%81%E6%95%99%E7%A8%8B%28www.Linuxidc.com%E6%95%B4%E7%90%86%29.pdf",b.zip_url="http://7xt49i.com2.z0.glb.clouddn.com/pack.zip",c.user_id?b.need_learn=!1:b.need_learn=!0,b.need_learn?b.btn_content="开始学习":(b.btn_content="继续学习",b.progress_info_percent=10,b.progress_info_hour=1,b.progress_info_minute=10),b.start_or_continue=function(){b.need_learn?(b.need_learn=!1,b.btn_content="继续学习",b.progress_info_percent=10,b.progress_info_hour=1,b.progress_info_minute=10):b.show_resource=!0}}]),GlobalModules.add_controller("lessons"),angular.module("just.controllers.lessons",[]).controller("LessonsController",["$rootScope","$scope","$timeout","LessonsService","CollegeMajorService","CommonUtil",function(a,b,c,d,e,f){void 0==a.all_lessons&&d.lessons_list(function(c){a.all_lessons=c,b.lessons=a.all_lessons}),b.lessons=a.all_lessons,b.colleges=a.all_colleges,b.majors=a.all_majors,b.chosen_college=null,b.chosen_major=null,b.change_college=function(c){c?(b.majors=c.major_list,b.lessons=f.getLessonsByCollege(c.id)):(b.chosen_major=null,b.majors=a.all_majors,b.lessons=a.all_lessons)},b.change_major=function(c){c?angular.forEach(a.all_colleges,function(a){a.id==c.college_id&&(b.chosen_college=a,b.lessons=f.getLessonsByMajor(c.id))}):(b.majors=a.all_majors,b.lessons=a.all_lessons)}}]),GlobalModules.add_controller("manage_lesson"),angular.module("just.controllers.manage_lesson",[]).controller("ManageLessonController",["$rootScope","$scope","$log","$filter","$q","LessonsService","CommonUtil","FileService","QiniuUpload","UuidService",function(a,b,c,d,e,f,g,h,i,j){b.active_type="creat_lesson",b.change_active=function(a){b.active_type=a},b.itemsByPage=2,b.show_modal=function(){a.strap_modal({title:"title",content:"..",show:!0})},b.edit=function(b){a.strap_modal({title:"title",content:"..",show:!0})},b["delete"]=function(c){b.modal_ok=function(){console.log("ok")},a.strap_modal({scope:b,title:"删除课程",content:"确定要删除该课程吗"})},b.colleges=a.all_colleges,b.majors=a.all_majors,b.chosen_college=null,b.chosen_major=null,b.change_college=function(c){c?b.majors=c.major_list:b.majors=a.all_majors,b.new_lesson.college_id=c.id},b.change_major=function(c){return b.chosen_college?void(b.majors=b.chosen_college.major_list):(c?angular.forEach(a.all_colleges,function(a){a.id==c.college_id&&(b.chosen_college=a)}):b.majors=a.all_majors,void(b.new_lesson.major_id=c.id))},b.new_lesson={teacher_id:a.current_user.id,icon_url:null,name:"",college_id:null,major_id:null,introduction:"",description:"",outline_list:[],temp_outline_list:[],wish:"",temp_outline:{chapter:"",name:"",introduction:""},attachment_list:[],open_outline_plus_modal:function(){b.modal_title="创建提纲",b.form=b.modalForm,b.modal_content_url="/manage_lesson/_new_lesson_modal_content",b.modal_type="open_outline_plus_modal",b.new_lesson.temp_outline={chapter:"",name:"",introduction:""},b.modal_ok=function(){if("open_outline_plus_modal"==b.modal_type)b.new_lesson.temp_outline_list.push(b.new_lesson.temp_outline),b.new_lesson.temp_outline={chapter:"",name:"",introduction:""};else{var a=!0;angular.forEach(b.new_lesson.temp_outline_list,function(c,d){a&&(b.new_lesson.temp_outline_list.splice(d,1,b.new_lesson.temp_outline),a=!1)})}},a.strap_modal({scope:b})},open_outline_edit_modal:function(c){b.modal_title="修改提纲",b.modal_content_url="/manage_lesson/_new_lesson_modal_content",b.modal_type="open_outline_edit_modal",b.new_lesson.temp_outline=angular.copy(c),a.strap_modal({scope:b})},remove_temp_outline:function(a){var c=!0;angular.forEach(b.new_lesson.temp_outline_list,function(d,e){c&&angular.equals(d,a)&&(b.new_lesson.temp_outline_list.splice(e,1),c=!1)})}},b.new_lesson.temp_outline_list.active_outline_index=-1,b.upload={start_flag:!1,get_token_promise_array:[],onFileSelect:function(a){for(index in a){var b=i.get_suffix_info_obj(a[index]),c={suffix_info_obj:b,file:a[index],file_name:a[index].name,get_token_promise:i.get_token(b).then(function(a){return{key:j.newuuid(b.suffix),token:a.token}})};this.get_token_promise_array.push(c)}},do_upload:function(c){this.start_flag=!0;var d=function(b,c,d){i.upload(b,c).then(function(c){d&&d(c),a.alert_modal("",b.name+"上传成功!")},function(a){console.log(a)},function(a){b&&(b.progress.p=Math.floor(100*a.loaded/a.totalSize))})},f=function(a,c){for(index in b.upload.get_token_promise_array)g(index,a,c)},g=function(a,c,e){b.upload.get_token_promise_array[a].file.progress={p:0},b.upload.get_token_promise_array[a].get_token_promise.then(function(e){console.log(e),d(b.upload.get_token_promise_array[a].file,e,function(d){switch(b.upload.get_token_promise_array[a].suffix_info_obj.type){case"image":console.log(d.key),b.new_lesson.icon_url=d.key;break;case"video":break;case"file":var e={name:b.upload.get_token_promise_array[a].name,file_url:d};b.new_lesson.attachment_list.push(e)}a==b.upload.get_token_promise_array.length-1&&c()})})};e(f).then(function(){c&&c()})},abort:function(a,b,c){i.abort(a,b,c)}},b.create_lesson=function(){b.upload.do_upload(function(){console.log(b.new_lesson),f.create_lesson(b.new_lesson,function(a){console.log(a)})})}}]),GlobalModules.add_controller("me"),angular.module("just.controllers.me",[]).controller("MeController",["$rootScope","$scope","UserService","QiniuUpload","CommonUtil","FileService",function(a,b,c,d,e,f){b.active_type="chosen_lessons",b.change_active=function(a){b.active_type=a},c.myLessons(a.current_user,function(a){b.chosen_lessons=a}),b.upload={selectFileArray:null,selectFile:null,get_token_promise:{},onFileSelect:function(a){this.selectFileArray=a,this.selectFile=a[0];var b=d.get_suffix_info_obj(this.selectFile);this.get_token_promise=d.get_token(b).then(function(a){return{key:a.key,token:a.token}})},do_upload:function(){b.upload.selectFile.progress={p:0};var c=function(c){console.log(c),d.upload(b.upload.selectFile,c).then(function(b){console.log(b),a.alert_modal("成功","上传文件成功")},function(a){console.log(a)},function(a){b.upload.selectFile&&(b.upload.selectFile.progress.p=Math.floor(100*a.loaded/a.totalSize))})};this.get_token_promise.then(function(a){c(a)})},abort:function(){d.abort(this.selectFile,this.selectFileArray),b.upload.selectFile=null}}}]),GlobalModules.add_controller("user"),angular.module("just.controllers.user",["ngCookies"]).controller("UserController",["$rootScope","$scope","UserService",function(a,b,c){a.current_user&&a.go("/"),b.form_type="login",b.change_active=function(a){b.form_type=a},b.error_infos=[],b.user={email:a.get_storage("email")||"",password:a.get_storage("password")||"",remember_me:!0},b.can_submit=function(){return""==b.user.name?!1:""!=b.user.password},b.submit=function(){b.can_submit()&&"login"==b.form_type&&(b.user.remember_me?(a.set_storage("email",b.user.email),a.set_storage("password",b.user.password)):(a.set_storage("email",null),a.set_storage("password",null)),c.sign_in(b.user,function(b){a.set_cache("token",b.token),a.go("/users/"+a.current_user.id+"/me")}))},b.register={name:"",email:"",password:"",password_again:""},b.can_register=function(){return!!(b.register.name&&b.register.email&&b.register.password&&b.register.password===b.register.password_again)},b.register_ok=function(){b.can_register()&&c.register(b.register,function(b){a.alert_modal("提示","邮件已经发送到邮箱,请登陆邮箱确认后登陆")})}}]),GlobalModules.add_directive("just_unique_validation"),angular.module("just.directives.just_unique_validation",[]).directive("justUniqueValidation",["$rootScope",function(a){return{require:"ngModel",restrict:"A",scope:{target_array_or_object:"=targetArrayOrObject"},link:function(a,b,c,d){b.on("input",function(c){a.$apply(function(){var c=!0;angular.forEach(a.target_array_or_object,function(a){c&&a.chapter&&(a.chapter==b.val()?(d.$setValidity("chapterExistValidation",!1),c=!1):d.$setValidity("chapterExistValidation",!0))})})})}}}]),GlobalModules.add_directive("just_video"),angular.module("just.directives.just_video",[]).directive("justVideo",["$rootScope",function(a){return{scope:{video_url:"=videoUrl"},restrict:"E",templateUrl:"/app/partials/directives_template/just_video.html",replace:!0,link:function(a,b,c,d){}}}]),GlobalModules.add_directive("just_card"),angular.module("just.directives.just_card",[]).directive("justCard",["$rootScope","$location",function(a,b){return{scope:{lesson:"="},restrict:"E",templateUrl:"/app/partials/directives_template/just_card.html",replace:!0,transclude:!0,link:function(c,d,e,f){c.choose_lesson=function(c){"/lessons/index"==b.path()?a.go("/lessons/"+c.id+"/show"):a.go("/users/"+a.current_user.id+"/lessons/"+c.id+"/show")}}}}]),angular.module("just.filters",[]).filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!=e&&(a=a.substr(0,e))}return a+(d||" …")}}).filter("password",[function(){return function(a){if(!a)return"";var b="";for(i=0;i<a.length;i++)b+="*";return b}}]),angular.module("just.route_config",[]).provider("RouteConfig",function(){this.$get=function(){function a(a){c=c.concat(a)}function b(){return c}var c=[],d=function(a){return"/app/partials/"+a+".html"},e=[{path:"/",templateUrl:d("user/login"),controller:"UserController"},{path:"/login",templateUrl:d("user/login"),controller:"UserController"}],f=[{path:"/users/:user_id/me",templateUrl:d("me/show"),controller:"MeController"},{path:"/users/:user_id/lessons/:lesson_id/show",templateUrl:d("lessons/show"),controller:"LessonController"}],g=[{path:"/lessons/index",templateUrl:d("lessons/index"),controller:"LessonsController"},{path:"/lessons/:lesson_id/show",templateUrl:d("lessons/show"),controller:"LessonController"}],h=[{path:"/users/:user_id/manage_lesson",templateUrl:d("manage_lesson/show"),controller:"ManageLessonController"}];return a(e),a(f),a(g),a(h),{get:b}}}),GlobalModules.add_service("anchorSmoothScroll"),angular.module("just.services.anchorSmoothScroll",[]).service("AnchorSmoothScrollService",function(){this.scrollTo=function(a){function b(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function c(a){for(var b=document.getElementById(a),c=b.offsetTop,d=b;d.offsetParent&&d.offsetParent!=document.body;)d=d.offsetParent,c+=d.offsetTop;return c}var d=b(),e=c(a),f=e>d?e-d:d-e,g=Math.round(f/100);g>=20&&(g=20);var h=Math.round(f/50),i=e>d?d+h:d-h,j=0;if(e>d)for(var k=d;e>k;k+=h)setTimeout("window.scrollTo(0, "+i+")",j*g),i+=h,i>e&&(i=e),j++;else for(var k=d;k>e;k-=h)setTimeout("window.scrollTo(0, "+i+")",j*g),i-=h,e>i&&(i=e),j++}}),GlobalModules.add_service("college_major"),angular.module("just.services.college_major",[]).factory("CollegeMajorService",["$rootScope","$resource","$http",function(a,b,c){function d(a){e.get_college_major({},{},function(b){a&&a(b)})}var e=b("/api/v1/colleges",{},{get_college_major:{method:"get",isArray:!0}});return{get_college_major:d}}]),GlobalModules.add_service("comments"),angular.module("just.services.comments",[]).factory("CommentsService",["$rootScope","$resource","$http",function(a,b,c){function d(a,b){g.delete_comments({course_id:a},{},function(a){b&&b(a)})}function e(a,b){g.get_comments({},{course_id:a},function(a){b&&b(a)})}function f(a,b){g.add_comments({},{course_id:a.course_id,content:a.content},function(a){b&&b(a)})}var g=b("/api/v1/courses/:course_id/comments",{course_id:"@course_id"},{delete_comments:{method:"delete",isArray:!1},get_comments:{method:"get",isArray:!0},add_comments:{method:"post",isArray:!1}});return{delete_comments:d,get_comments:e,add_comments:f}}]),GlobalModules.add_service("common_util"),angular.module("just.services.common_util",[]).factory("CommonUtil",["$rootScope","LessonsService",function(a,b){var c=function(){void 0==a.all_lessons&&b.lessons_list(function(b){a.all_lessons=b})},d=function(b){var d=[];return c(),angular.forEach(a.all_lessons,function(a){a.college.id==b&&d.push(a)}),d},e=function(b){var d=[];return c(),angular.forEach(a.all_lessons,function(a){a.major.id==b&&d.push(a)}),d},f=function(){var b=[];return c(),angular.forEach(a.all_lessons,function(c){c.teacher.id==a.current_user.id&&b.push(c)}),b},g=function(a){return image_array=[".bmp",".png",".gif",".jpg",".jpeg"],video_array=[".vob",".avi",".rmvb",".asf",".wmv",".mp4"],image_array.indexOf(a)>-1?"image":video_array.indexOf(a)>-1?"video":"file"};return{getLessonsByCollege:d,getLessonsByMajor:e,getMyCreatedLessons:f,adjustFileType:g}}]),GlobalModules.add_service("file"),angular.module("just.services.file",[]).factory("FileService",["$rootScope","$resource",function(a,b){function c(a){return e.file_token({},a)}function d(a){f.save_file({},{},function(b){a&&a(b)})}var e=b("/api/v1/files/tokens",{},{file_token:{method:"post"}}),f=b("/api/v1/files",{},{save_file:{method:"post"}});return{get_file_token:c,save_file:d}}]),GlobalModules.add_service("lesson"),angular.module("just.services.lesson",[]).factory("LessonService",["$rootScope","$resource","$http",function(a,b,c){function d(a,b){f.get_lesson({},{course_id:a},function(a){b&&b(a)})}function e(a){f.delete_lesson({},{},function(b){a&&a(b)})}var f=b("/api/v1/courses/:course_id",{course_id:"@course_id"},{delete_lesson:{method:"delete",isArray:!1},get_lesson:{method:"get",isArray:!1},delete_lesson:{method:"delete",isArray:!1}});return{get_lesson:d,delete_lesson:e}}]),GlobalModules.add_service("lessons"),angular.module("just.services.lessons",[]).factory("LessonsService",["$rootScope","$resource","$http",function(a,b,c){function d(a){f.lessons_list({},{},function(b){a&&a(b)})}function e(a,b){f.create_lesson({},{name:a.name,teacher_id:a.teacher_id,image_url:a.icon_url,description:a.description,introduction:a.introduction,wish:a.wish,college_id:a.college_id,major_id:a.major_id},function(a){b&&b(a)})}var f=b("/api/v1/courses",{},{lessons_list:{method:"get",isArray:!0,cache:!1},create_lesson:{method:"post",isArray:!1}});return{lessons_list:d,create_lesson:e}}]),GlobalModules.add_service("mark"),angular.module("just.services.mark",[]).factory("MarkService",["$rootScope","$resource","$http",function(a,b,c){function d(a){lessonAPI.get_lesson({},{},function(b){a&&a(b)})}function e(a){f.cancel_mark({},{},function(b){a&&a(b)})}var f=(b("/api/v1/courses/:course_id/marks",{},{add_mark:{method:"post",isArray:!1}}),b("/api/v1/courses/:course_id/marks/:mark_id",{},{cancel_mark:{method:"post",isArray:!1}}));return{add_mark:d,cancel_mark:e}}]),GlobalModules.add_service("qiniu_upload"),angular.module("just.services.qiniu_upload",[]).factory("QiniuUpload",["$rootScope","$resource","$http","$qupload","FileService","CommonUtil",function(a,b,c,d,e,f){var g=function(a){var b=a.name.substr(a.name.indexOf(".")).toLowerCase(),c=f.adjustFileType(b),d={suffix:b,type:c};return d},h=function(a){return e.get_file_token(a).$promise},i=function(a,b){return a.upload=d.upload({file:a,key:b.key,token:b.token}),a.upload},j=function(a,b,c){if(c>-1)b.splice(index,1);else for(index in b)if(b[index].name==a.name){b.splice(index,1);break}a.upload.abort()},k=function(){};return{get_suffix_info_obj:g,get_token:h,upload:i,abort:j,save_file_to_db:k}}]),GlobalModules.add_service("user"),angular.module("just.services.user",[]).factory("UserService",["$rootScope","$resource","$cookies",function(a,b,c){function d(b,c){j.sign_in({},{email:b.email||a.get_storage("email"),password:b.password||a.get_storage("password")},function(a){h(a.token),g(a.user),c&&c(a)},function(a){console.log(a)})}function e(b,c){j.sign_out({},{user:b},function(b){g(null),h(null),a.clear_cache(),a.reload(),c&&c(b)})}function f(a,b){k.register({},{user_name:a.name,email:a.email,password:a.password,password2:a.password_again},function(a){b&&b(a)})}function g(b){a.current_user=b,c.putObject("current_user",b)}function h(a){c.loginTokenCookie=a}function i(a,b){l.myLessons({},{user_id:a.id},function(a){b&&b(a)})}var j=b("/api/v1/tokens",{},{sign_in:{method:"post"},signout:{method:"delete"}}),k=b("/api/v1/users",{},{register:{method:"post"}}),l=b("/api/v1/users/:user_id/courses",{user_id:"@user_id"},{myLessons:{method:"get",isArray:!0}});return{sign_in:d,sign_out:e,register:f,myLessons:i}}]),GlobalModules.add_service("uuid"),angular.module("just.services.uuid",[]).factory("UuidService",[function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return{newuuid:function(a){for(var b=[],c="0123456789abcdef",d=0;36>d;d++)b[d]=c.substr(Math.floor(16*Math.random()),1);return b[14]="4",b[19]=c.substr(3&b[19]|8,1),b[8]=b[13]=b[18]=b[23]="-",b.join("")+a},newguid:function(b){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()+b}}}]);var version_timestamp="?v"+Date.parse(new Date);angular.module("just",GlobalModules.get(["ngRoute","ngResource","ngCookies","ngAnimate","ui.bootstrap","smart-table","angularQFileUpload","mgcrea.ngStrap","angularLocalStorage","just.route_config","just.constants","just.filters"])).config(["$httpProvider","$routeProvider","$locationProvider","$sceDelegateProvider","RouteConfigProvider","$modalProvider",function(a,b,c,d,e,f){d.resourceUrlWhitelist(["self","http://7xt49i.com2.z0.glb.clouddn.com/**","http://7xnz7k.com1.z0.glb.clouddn.com/**"]),a.interceptors.push(function(a){return{request:function(b){return b.headers.token=a.loginTokenCookie,b}}});var g=e.$get().get();angular.forEach(g,function(a){b.when(a.path,{templateUrl:a.templateUrl+version_timestamp,controller:a.controller})}),b.otherwise({redirectTo:"/login"}),a.defaults.headers.get||(a.defaults.headers.get={}),a.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",a.defaults.headers.get["Cache-Control"]="no-cache",a.defaults.headers.get.Pragma="no-cache",angular.extend(f.defaults,{animation:"am-fade-and-scale",html:!0,templateUrl:"/app/partials/common_modal.html",show:!0})}]).run(["$rootScope","$location","$routeParams","$modal","$cacheFactory","AnchorSmoothScrollService","storage","CollegeMajorService","LessonsService","$alert","UserService","$cookies",function(a,b,c,d,e,f,g,h,i,j,k,l){a.partial=function(a){return"app/partials/"+a+".html"+version_timestamp},a.go=function(a){b.url(a)},a.reload=function(a){a?location.reload():$route.reload()},a.location_path=function(){return b.path()};var m=e("just_cache");a.get_cache=function(a){return m.get(a)},a.set_cache=function(a,b){m.put(a,b)},a.clear_cache=function(){m.get("$http")&&m.get("$http").removeAll(),m.removeAll()},a.get_storage=function(a){return g.get(a)},a.set_storage=function(a,b){g.set(a,b)},a.clear_storage=function(){g.clearAll()},a.is_student=function(){return"STUDENT"==a.current_user.role_name},a.is_teacher=function(){return"TEACHER"==a.current_user.role_name},a.is_admin=function(){return"ADMIN"==a.current_user.role_name},a.scrollTo=function(a){f.scrollTo(a)},a.strap_modal=function(a){return d(a)},a.confirm_modal=function(b,c,d){c.modal_ok=d,a.strap_modal({content:b,title:"提示".concat(' <i class="fa fa-info-circle" aria-hidden="true"></i>'),scope:c})},a.alert_modal=function(a,b){return j({title:a.concat(' <i class="fa fa-info-circle" aria-hidden="true"></i>'),content:b,placement:"top-right",type:"info",show:!0})},l.getObject("current_user")&&(a.current_user=l.getObject("current_user")),void 0==a.college_major&&(a.all_colleges=[],a.all_majors=[],h.get_college_major(function(b){for(var c=0;c<b.length;c++){a.all_colleges.push(b[c]);for(index in b[c].major_list)b[c].major_list[index].college_id=b[c].id,a.all_majors.push(b[c].major_list[index])}})),a.$on("$routeChangeSuccess",function(c,d,e){"/"!=b.path()&&"/login"!=b.path()||(a.current_user=null)})}]);